<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>fastcgi++: Echo</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">index</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="echo">Echo </a></h1><h2><a class="anchor" name="echoTutorial">
Tutorial</a></h2>
Our goal here will be to make a FastCGI application that responds to clients with an echo of all session data that was processed. This will include HTTP header data along with post data that was transmitted by the client. Since we want to be able to echo any alphabets, our best solution is to use UTF-32 wide characters internally and have the library code convert it to UTF-8 before sending it to the client. Your going to need the boost C++ libraries for this. At least version 1.35.0.<p>
All code and data is located in the examples directory of the tarball. Make sure to link this with the following library options: -lfastcgipp -lboost_thread<h3><a class="anchor" name="echoError">
Error Handling</a></h3>
Our first step will be setting up an error logging system. Although requests can log errors directly to the HTTP server error log, I like to have an error logging system that's separate from the library when testing applications. Let's set up a function that takes a c style string and logs it to a file with a timestamp. Since everyone has access to the /tmp directory, I set it up to send error messages to /tmp/errlog. You can change it if you want to.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;fstream&gt;</span>
<span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span>

<span class="keywordtype">void</span> error_log(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg)
{
   <span class="keyword">using namespace </span>std;
   <span class="keyword">using namespace </span>boost;
   <span class="keyword">static</span> ofstream error;
   <span class="keywordflow">if</span>(!error.is_open())
   {
      error.open(<span class="stringliteral">"/tmp/errlog"</span>, ios_base::out | ios_base::app);
      error.imbue(locale(error.getloc(), <span class="keyword">new</span> posix_time::time_facet()));
   }

   error &lt;&lt; <span class="charliteral">'['</span> &lt;&lt; posix_time::second_clock::local_time() &lt;&lt; <span class="stringliteral">"] "</span> &lt;&lt; msg &lt;&lt; endl;
}
</pre></div><h3><a class="anchor" name="echoRequest">
Request Handler</a></h3>
Now we need to write the code that actually handles the request. Quite simply, all we need to do is derive from <a class="el" href="classFastcgipp_1_1Request.html" title="Request handling class">Fastcgipp::Request</a> and define the <a class="el" href="classFastcgipp_1_1Request.html#b20544d056d5f288bca354b8c996e451" title="Response generator.">Fastcgipp::Request::response()</a> function. Since we've decided to use wide Unicode characters, we need to pass wchar_t as the template parameter to the Request class as opposed to char.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;<a class="code" href="request_8hpp.html" title="Defines the Fastcgipp::Request class.">fastcgi++/request.hpp</a>&gt;</span>

<span class="keyword">class </span>HelloWorld: <span class="keyword">public</span> Fastcgipp::Request&lt;wchar_t&gt;
{
</pre></div><p>
Now we can define our response function. It is this function that is called to generate a response for the client. It isn't a good idea to define the response() function inline as it is called from numerous spots, but for the examples readability we will make an exception.<p>
<div class="fragment"><pre class="fragment">   <span class="keywordtype">bool</span> response()
   {
</pre></div><p>
First thing we need to do is output our HTTP header. Let us start with settting a cookie in the client using a Unicode string. Just to see how it echoes.<p>
<div class="fragment"><pre class="fragment">      <span class="keywordtype">wchar_t</span> langString[] = { 0x0440, 0x0443, 0x0441, 0x0441, 0x043a, 0x0438, 0x0439, 0x0000 };
      out &lt;&lt; <span class="stringliteral">"Set-Cookie: lang="</span> &lt;&lt; langString &lt;&lt; <span class="charliteral">'\n'</span>;
</pre></div><p>
Next of course we need to output our content type part of the header. Note the charset=utf-8. Remember that HTTP headers must be terminated with "\r\n\r\n". Not just "\n\n".<p>
<div class="fragment"><pre class="fragment">      out &lt;&lt; <span class="stringliteral">"Content-Type: text/html; charset=utf-8\r\n\r\n"</span>;
</pre></div><p>
Next we'll get some initial HTML stuff out of the way<p>
<div class="fragment"><pre class="fragment">      out &lt;&lt; <span class="stringliteral">"&lt;html&gt;&lt;head&gt;&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8' /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;title&gt;fastcgi++: Echo in UTF-8&lt;/title&gt;&lt;/head&gt;&lt;body&gt;"</span>;
</pre></div><p>
Now we are ready to start outputting session data. We'll start with the non-post session data. This data is defined and initialized in the session object which is of type <a class="el" href="structFastcgipp_1_1Http_1_1Session.html" title="Data structure of HTTP session data.">Fastcgipp::Http::Session</a>.<p>
<div class="fragment"><pre class="fragment">      out &lt;&lt; <span class="stringliteral">"&lt;h1&gt;Session Parameters&lt;/h1&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;p&gt;&lt;b&gt;Hostname:&lt;/b&gt; "</span> &lt;&lt; session.host &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;User Agent:&lt;/b&gt; "</span> &lt;&lt; session.userAgent &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Accepted Content Types:&lt;/b&gt; "</span> &lt;&lt; session.acceptContentTypes &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Accepted Languages:&lt;/b&gt; "</span> &lt;&lt; session.acceptLanguages &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Accepted Characters Sets:&lt;/b&gt; "</span> &lt;&lt; session.acceptCharsets &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Referer:&lt;/b&gt; "</span> &lt;&lt; session.referer &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Content Type:&lt;/b&gt; "</span> &lt;&lt; session.contentType &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Query String:&lt;/b&gt; "</span> &lt;&lt; session.queryString &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Cookies:&lt;/b&gt; "</span> &lt;&lt; session.cookies &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Root:&lt;/b&gt; "</span> &lt;&lt; session.root &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Script Name:&lt;/b&gt; "</span> &lt;&lt; session.scriptName &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Content Length:&lt;/b&gt; "</span> &lt;&lt; session.contentLength &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Keep Alive Time:&lt;/b&gt; "</span> &lt;&lt; session.keepAlive &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Server Address:&lt;/b&gt; "</span> &lt;&lt; session.serverAddress &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Server Port:&lt;/b&gt; "</span> &lt;&lt; session.serverPort &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Client Address:&lt;/b&gt; "</span> &lt;&lt; session.remoteAddress &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Client Port:&lt;/b&gt; "</span> &lt;&lt; session.remotePort &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;If Modified Since:&lt;/b&gt; "</span> &lt;&lt; session.ifModifiedSince &lt;&lt; <span class="stringliteral">"&lt;/p&gt;"</span>;
</pre></div><p>
Next, we will make a little loop to output the post data. The post data is stored in the associative container session.posts of type <a class="el" href="structFastcgipp_1_1Http_1_1Session.html#cc8113d8fa9c05be08503e68caee812a">Fastcgipp::Http::Session::Posts</a> linking field names to <a class="el" href="structFastcgipp_1_1Http_1_1Post.html" title="Holds a piece of HTTP post data.">Fastcgipp::Http::Post</a> objects.<p>
<div class="fragment"><pre class="fragment">      out &lt;&lt; <span class="stringliteral">"&lt;h1&gt;Post Data&lt;/h1&gt;"</span>;
</pre></div><p>
If there isn't any POST data, we'll just say so<p>
<div class="fragment"><pre class="fragment">      <span class="keywordflow">if</span>(session.posts.size())
         <span class="keywordflow">for</span>(<a class="code" href="structFastcgipp_1_1Http_1_1Session.html" title="Data structure of HTTP session data.">Fastcgipp::Http::Session&lt;wchar_t&gt;::Posts::iterator</a> it=session.posts.begin(); it!=session.posts.end(); ++it)
         {
            out &lt;&lt; <span class="stringliteral">"&lt;h2&gt;"</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="stringliteral">"&lt;/h2&gt;"</span>;

            <span class="keywordflow">if</span>(it-&gt;second.type==<a class="code" href="structFastcgipp_1_1Http_1_1Post.html" title="Holds a piece of HTTP post data.">Fastcgipp::Http::Post&lt;wchar_t&gt;::form</a>)
            {
               out &lt;&lt; <span class="stringliteral">"&lt;p&gt;&lt;b&gt;Type:&lt;/b&gt; form data&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Value:&lt;/b&gt; "</span> &lt;&lt; it-&gt;second.value &lt;&lt; <span class="stringliteral">"&lt;/p&gt;"</span>;
            }
            
            <span class="keywordflow">else</span>
            {
               out &lt;&lt; <span class="stringliteral">"&lt;p&gt;&lt;b&gt;Type:&lt;/b&gt; file&lt;br /&gt;"</span>;
</pre></div><p>
When the post type is a file, the filename is stored in Post::value<p>
<div class="fragment"><pre class="fragment">               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Filename:&lt;/b&gt; "</span> &lt;&lt; it-&gt;second.value &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Size:&lt;/b&gt; "</span> &lt;&lt; it-&gt;second.size &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Data:&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;"</span>;
</pre></div><p>
We will use <a class="el" href="classFastcgipp_1_1Fcgistream.html#ccf72ff881e5ef268aaabddae4ffd686" title="Dumps raw data directly into the FastCGI protocol.">Fastcgipp::Fcgistream::dump</a> to send the file raw data directly to the client<p>
<div class="fragment"><pre class="fragment">               out.dump(it-&gt;second.data.get(), it-&gt;second.size);
               out &lt;&lt; <span class="stringliteral">"&lt;/pre&gt;"</span>;
            }
         }
      <span class="keywordflow">else</span>
         out &lt;&lt; <span class="stringliteral">"&lt;p&gt;No post data&lt;/p&gt;"</span>;
</pre></div><p>
And we're basically done defining our response! All we need to do is return a boolean value. Always return true if you are done. This will let apache and the manager know we are done so they can destroy the request and free it's resources. Return false if you are not finished but want to relinquish control and allow other requests to operate. You would do this if the request needed to wait for a message to be passed back to it through the task manager.<p>
<div class="fragment"><pre class="fragment">      <span class="keywordflow">return</span> <span class="keyword">true</span>;
   }
};
</pre></div><h3><a class="anchor" name="echoManager">
Requests Manager</a></h3>
Now we need to make our main() function. Really all one needs to do is create a <a class="el" href="classFastcgipp_1_1Manager.html" title="General task and protocol management class.">Fastcgipp::Manager</a> object with the new class we made as a template parameter, then call it's handler. Let's go one step further though and set up a try/catch loop in case we get any exceptions and log them with our error_log function.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;<a class="code" href="manager_8hpp.html" title="Defines the Fastcgipp::Manager class.">fastcgi++/manager.hpp</a>&gt;</span>

<span class="keywordtype">int</span> main()
{
   <span class="keywordflow">try</span>
   {
      <a class="code" href="classFastcgipp_1_1Manager.html" title="General task and protocol management class.">Fastcgipp::Manager&lt;Echo&gt;</a> fcgi;
      fcgi.<a class="code" href="classFastcgipp_1_1Manager.html#578c8468166d892d1858ad6f4d953d8d" title="General handling function to be called after construction.">handler</a>();
   }
   <span class="keywordflow">catch</span>(std::exception&amp; e)
   {
      error_log(e.what());
   }
}
</pre></div><h2><a class="anchor" name="echoWorldCode">
Full Source Code</a></h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;fstream&gt;</span>
<span class="preprocessor">#include "boost/date_time/posix_time/posix_time.hpp"</span>
<span class="preprocessor">#include &lt;<a class="code" href="request_8hpp.html" title="Defines the Fastcgipp::Request class.">fastcgi++/request.hpp</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="manager_8hpp.html" title="Defines the Fastcgipp::Manager class.">fastcgi++/manager.hpp</a>&gt;</span>

<span class="keywordtype">void</span> error_log(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg)
{
   <span class="keyword">using namespace </span>std;
   <span class="keyword">using namespace </span>boost;
   <span class="keyword">static</span> ofstream error;
   <span class="keywordflow">if</span>(!error.is_open())
   {
      error.open(<span class="stringliteral">"/tmp/errlog"</span>, ios_base::out | ios_base::app);
      error.imbue(locale(error.getloc(), <span class="keyword">new</span> posix_time::time_facet()));
   }

   error &lt;&lt; <span class="charliteral">'['</span> &lt;&lt; posix_time::second_clock::local_time() &lt;&lt; <span class="stringliteral">"] "</span> &lt;&lt; msg &lt;&lt; endl;
}

<span class="keyword">class </span>Echo: <span class="keyword">public</span> Fastcgipp::Request&lt;wchar_t&gt;
{
   <span class="keywordtype">bool</span> response()
   {
      <span class="keywordtype">wchar_t</span> langString[] = { 0x0440, 0x0443, 0x0441, 0x0441, 0x043a, 0x0438, 0x0439, 0x0000 };
      out &lt;&lt; <span class="stringliteral">"Set-Cookie: lang="</span> &lt;&lt; langString &lt;&lt; <span class="charliteral">'\n'</span>;

      out &lt;&lt; <span class="stringliteral">"Content-Type: text/html; charset=utf-8\r\n\r\n"</span>;

      out &lt;&lt; <span class="stringliteral">"&lt;html&gt;&lt;head&gt;&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8' /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;title&gt;fastcgi++: Echo in UTF-8&lt;/title&gt;&lt;/head&gt;&lt;body&gt;"</span>;

      out &lt;&lt; <span class="stringliteral">"&lt;h1&gt;Session Parameters&lt;/h1&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;p&gt;&lt;b&gt;Hostname:&lt;/b&gt; "</span> &lt;&lt; session.host &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;User Agent:&lt;/b&gt; "</span> &lt;&lt; session.userAgent &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Accepted Content Types:&lt;/b&gt; "</span> &lt;&lt; session.acceptContentTypes &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Accepted Languages:&lt;/b&gt; "</span> &lt;&lt; session.acceptLanguages &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Accepted Characters Sets:&lt;/b&gt; "</span> &lt;&lt; session.acceptCharsets &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Referer:&lt;/b&gt; "</span> &lt;&lt; session.referer &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Content Type:&lt;/b&gt; "</span> &lt;&lt; session.contentType &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Query String:&lt;/b&gt; "</span> &lt;&lt; session.queryString &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Cookies:&lt;/b&gt; "</span> &lt;&lt; session.cookies &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Root:&lt;/b&gt; "</span> &lt;&lt; session.root &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Script Name:&lt;/b&gt; "</span> &lt;&lt; session.scriptName &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Content Length:&lt;/b&gt; "</span> &lt;&lt; session.contentLength &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Keep Alive Time:&lt;/b&gt; "</span> &lt;&lt; session.keepAlive &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Server Address:&lt;/b&gt; "</span> &lt;&lt; session.serverAddress &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Server Port:&lt;/b&gt; "</span> &lt;&lt; session.serverPort &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Client Address:&lt;/b&gt; "</span> &lt;&lt; session.remoteAddress &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Client Port:&lt;/b&gt; "</span> &lt;&lt; session.remotePort &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
      out &lt;&lt; <span class="stringliteral">"&lt;b&gt;If Modified Since:&lt;/b&gt; "</span> &lt;&lt; session.ifModifiedSince &lt;&lt; <span class="stringliteral">"&lt;/p&gt;"</span>;

      out &lt;&lt; <span class="stringliteral">"&lt;h1&gt;Post Data&lt;/h1&gt;"</span>;
      <span class="keywordflow">if</span>(session.posts.size())
         <span class="keywordflow">for</span>(<a class="code" href="structFastcgipp_1_1Http_1_1Session.html" title="Data structure of HTTP session data.">Fastcgipp::Http::Session&lt;wchar_t&gt;::Posts::iterator</a> it=session.posts.begin(); it!=session.posts.end(); ++it)
         {
            out &lt;&lt; <span class="stringliteral">"&lt;h2&gt;"</span> &lt;&lt; it-&gt;first &lt;&lt; <span class="stringliteral">"&lt;/h2&gt;"</span>;
            <span class="keywordflow">if</span>(it-&gt;second.type==<a class="code" href="structFastcgipp_1_1Http_1_1Post.html" title="Holds a piece of HTTP post data.">Fastcgipp::Http::Post&lt;wchar_t&gt;::form</a>)
            {
               out &lt;&lt; <span class="stringliteral">"&lt;p&gt;&lt;b&gt;Type:&lt;/b&gt; form data&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Value:&lt;/b&gt; "</span> &lt;&lt; it-&gt;second.value &lt;&lt; <span class="stringliteral">"&lt;/p&gt;"</span>;
            }
            
            <span class="keywordflow">else</span>
            {
               out &lt;&lt; <span class="stringliteral">"&lt;p&gt;&lt;b&gt;Type:&lt;/b&gt; file&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Filename:&lt;/b&gt; "</span> &lt;&lt; it-&gt;second.value &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Size:&lt;/b&gt; "</span> &lt;&lt; it-&gt;second.size &lt;&lt; <span class="stringliteral">"&lt;br /&gt;"</span>;
               out &lt;&lt; <span class="stringliteral">"&lt;b&gt;Data:&lt;/b&gt;&lt;/p&gt;&lt;pre&gt;"</span>;
               out.dump(it-&gt;second.data.get(), it-&gt;second.size);
               out &lt;&lt; <span class="stringliteral">"&lt;/pre&gt;"</span>;
            }
         }
      <span class="keywordflow">else</span>
         out &lt;&lt; <span class="stringliteral">"&lt;p&gt;No post data&lt;/p&gt;"</span>;

      out &lt;&lt; <span class="stringliteral">"&lt;/body&gt;&lt;/html&gt;"</span>;
      <span class="keywordflow">return</span> <span class="keyword">true</span>;
   }
};

<span class="keywordtype">int</span> main()
{
   <span class="keywordflow">try</span>
   {
      <a class="code" href="classFastcgipp_1_1Manager.html" title="General task and protocol management class.">Fastcgipp::Manager&lt;Echo&gt;</a> fcgi;
      fcgi.<a class="code" href="classFastcgipp_1_1Manager.html#578c8468166d892d1858ad6f4d953d8d" title="General handling function to be called after construction.">handler</a>();
   }
   <span class="keywordflow">catch</span>(std::exception&amp; e)
   {
      error_log(e.what());
   }
}
</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Dec 11 01:47:28 2008 for fastcgi++ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.7.1 </small></address>
</body>
</html>
